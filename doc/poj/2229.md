---
title: POJ 2229 DP
date: 2018-11-19 15:38:49
categories:
  - POJ
tags:
  - DP
---

题目链接：http://poj.org/problem?id=2229

给出一个数 $N$，将其拆成任意个二次幂的数（1，2，4，8...）之和，问有多少种拆法。

例如对于数字 $N=7$，有 6 种拆法：

```
1) 1+1+1+1+1+1+1 
2) 1+1+1+1+1+2 
3) 1+1+1+2+2 
4) 1+1+1+4 
5) 1+2+2+2 
6) 1+2+4 
```

<!-- more -->

## 思路

令 $dp_i$ 为数字 $i$ 的拆法数量。

如果 $i$ 是奇数，那么 $i$ 最后拆成的数字序列中必然有 1 的存在（因为所有的二次幂数除了 1 以外都是偶数），因此其拆法数量和 $i-1$ 相同。

$$
dp_i = dp_{i-1} (i 是奇数)
$$

如果 $i$ 是偶数，那么 $i$ 最后拆成的数字序列可以分为两类，带 1 和不带 1：
* 如果不带 1，那么 $i$ 由一堆偶数组成，将这些偶数全部除以 2，则其拆法数量和 $\frac{i}{2}$ 相同
* 如果带 1，那么其拆法数量和 $i-1$ 相同

$$
dp_i = dp_{\frac{i}{2}} + dp_{i-1} (i 是偶数)
$$

{% include_code acm-solutions/POJ/2229.cpp %}
